"use strict";exports.id=2682,exports.ids=[2682],exports.modules={42682:(e,a,s)=>{s.r(a),s.d(a,{default:()=>p});var t=s(45512),i=s(58009),l=s(9349),r=s(70733),n=s(45103);let o=()=>{let[e,a]=(0,i.useState)({ten:"",email:"",dienthoai:"",hinh:null}),[s,r]=(0,i.useState)(null),o=async()=>{let e=new FormData;e.append("file",s),e.append("upload_preset","my_unsigned_preset");try{let s=await fetch("https://api.cloudinary.com/v1_1/dn7s1su66/image/upload",{method:"POST",body:e}),t=await s.json();a(e=>({...e,hinh:t.secure_url}))}catch(e){console.error(e)}},d=async()=>{try{let e=await (0,l.hX)();console.log(e),a({ten:e.data.ten||"",email:e.data.email||"",dienthoai:e.data.dienthoai||"",hinh:e.data.hinh||null})}catch(e){console.error("Failed to fetch user data:",e)}};(0,i.useEffect)(()=>{d()},[]);let c=async e=>{let{id:s,value:t,files:i}=e.target;i?(r(i[0]),await o()):a(e=>({...e,[s]:t}))},p=async a=>{a.preventDefault();try{await (0,l.TK)(e),alert("Th\xf4ng tin đ\xe3 được cập nhật th\xe0nh c\xf4ng")}catch(e){alert("Cập nhật th\xf4ng tin thất bại"),console.error(e)}};return(0,t.jsxs)("div",{className:"profile-form",children:[(0,t.jsx)("h3",{children:"Profile"}),(0,t.jsxs)("form",{onSubmit:p,children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"ten",children:"T\xean"}),(0,t.jsx)("input",{type:"text",id:"ten",placeholder:"Nhập t\xean của bạn",value:e.ten,onChange:c})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"email",children:"Email"}),(0,t.jsx)("input",{type:"email",id:"email",placeholder:"Nhập email của bạn",value:e.email,onChange:c})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"dienthoai",children:"Điện thoại"}),(0,t.jsx)("input",{type:"text",id:"dienthoai",placeholder:"Nhập số điện thoại của bạn",value:e.dienthoai,onChange:c})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"hinh",children:"H\xecnh"}),(0,t.jsx)("input",{type:"file",id:"hinh",onChange:c}),e.hinh&&(0,t.jsx)(n.default,{width:500,height:300,src:e.hinh,alt:"Profile",style:{width:"100px",height:"100px",marginTop:"10px"}})]}),(0,t.jsx)("button",{type:"submit",className:"rts-btn btn-primary",children:"Cập nhật th\xf4ng tin"})]})]})},d=()=>{let[e,a]=(0,i.useState)({facebook:"",skype:"",linkedin:"",pinterest:"",github:""});(0,i.useEffect)(()=>{(0,r.E)().then(e=>{a(e.data.reduce((e,a)=>(e[a.nentang]=a.url,e),{}))}).catch(e=>{console.error("Failed to fetch social profile data:",e)})},[]);let[s,l]=(0,i.useState)({facebook:"",skype:"",linkedin:"",pinterest:"",github:""});(0,i.useEffect)(()=>{e&&l({facebook:e.facebook||"",skype:e.skype||"",linkedin:e.linkedin||"",pinterest:e.pinterest||"",github:e.github||""})},[e]);let n=e=>{let{id:a,value:s}=e.target;l(e=>({...e,[a]:s}))},o=async e=>{e.preventDefault();try{let e=["facebook","skype","linkedin","pinterest","github"].filter(e=>s[e]).map(e=>(0,r.T)({nentang:e,url:s[e]}));await Promise.all(e),alert("Social profile links have been successfully updated")}catch(e){alert("Failed to update social profile links"),console.error(e)}};return(0,t.jsx)("div",{className:"tab-pane fade show active",id:"pills-home",role:"tabpanel","aria-labelledby":"pills-home-tab",children:(0,t.jsxs)("div",{className:"social-profile-link-wrapper",children:[(0,t.jsx)("h5",{className:"title",children:"Social Profile Link"}),(0,t.jsxs)("form",{onSubmit:o,children:[(0,t.jsxs)("div",{className:"single-profile-wrapper",children:[(0,t.jsx)("div",{className:"left",children:(0,t.jsxs)("div",{className:"icon",children:[(0,t.jsx)("i",{className:"fa-brands fa-facebook-f"}),(0,t.jsx)("span",{children:"Facebook"})]})}),(0,t.jsx)("div",{className:"right",children:(0,t.jsx)("input",{type:"text",id:"facebook",placeholder:"https://www.facebook.com/username",onChange:n,value:s.facebook})})]}),(0,t.jsxs)("div",{className:"single-profile-wrapper",children:[(0,t.jsx)("div",{className:"left",children:(0,t.jsxs)("div",{className:"icon",children:[(0,t.jsx)("i",{className:"fa-brands fa-skype"}),(0,t.jsx)("span",{children:"Skype"})]})}),(0,t.jsx)("div",{className:"right",children:(0,t.jsx)("input",{type:"text",id:"skype",placeholder:"https://www.skype.com/username",onChange:n,value:s.skype})})]}),(0,t.jsxs)("div",{className:"single-profile-wrapper",children:[(0,t.jsx)("div",{className:"left",children:(0,t.jsxs)("div",{className:"icon",children:[(0,t.jsx)("i",{className:"fa-brands fa-linkedin"}),(0,t.jsx)("span",{children:"LinkedIn"})]})}),(0,t.jsx)("div",{className:"right",children:(0,t.jsx)("input",{type:"text",id:"linkedin",placeholder:"https://www.linkedin.com/username",onChange:n,value:s.linkedin})})]}),(0,t.jsxs)("div",{className:"single-profile-wrapper",children:[(0,t.jsx)("div",{className:"left",children:(0,t.jsxs)("div",{className:"icon",children:[(0,t.jsx)("i",{className:"fa-brands fa-pinterest"}),(0,t.jsx)("span",{children:"Pinterest"})]})}),(0,t.jsx)("div",{className:"right",children:(0,t.jsx)("input",{type:"text",id:"pinterest",placeholder:"https://www.pinterest.com/username",onChange:n,value:s.pinterest})})]}),(0,t.jsxs)("div",{className:"single-profile-wrapper",children:[(0,t.jsx)("div",{className:"left",children:(0,t.jsxs)("div",{className:"icon",children:[(0,t.jsx)("i",{className:"fa-brands fa-github"}),(0,t.jsx)("span",{children:"Github"})]})}),(0,t.jsx)("div",{className:"right",children:(0,t.jsx)("input",{type:"text",id:"github",placeholder:"https://www.github.com/username",onChange:n,value:s.github})})]}),(0,t.jsx)("button",{type:"submit",className:"rts-btn btn-primary",children:"Update Profile"})]})]})})},c=()=>{let[e,a]=(0,i.useState)({old_password:"",password:"",password_confirmation:""}),s=e=>{let{id:s,value:t}=e.target;a(e=>({...e,[s]:t}))},r=async a=>{if(a.preventDefault(),e.password!==e.password_confirmation){alert("New password and confirmation do not match");return}try{await (0,l.BM)(e),alert("Password has been successfully reset")}catch(e){alert("Failed to reset password"),console.error(e)}};return(0,t.jsx)("div",{className:"setting-change-password-area",children:(0,t.jsxs)("form",{onSubmit:r,className:"form-password-area",children:[(0,t.jsxs)("div",{className:"single-input",children:[(0,t.jsx)("label",{htmlFor:"old_password",children:"Current Password"}),(0,t.jsx)("input",{id:"old_password",type:"password",placeholder:"Current Password",value:e.old_password,onChange:s,required:!0})]}),(0,t.jsxs)("div",{className:"single-input",children:[(0,t.jsx)("label",{htmlFor:"password",children:"New Password"}),(0,t.jsx)("input",{id:"password",type:"password",placeholder:"New Password",value:e.password,onChange:s,required:!0})]}),(0,t.jsxs)("div",{className:"single-input",children:[(0,t.jsx)("label",{htmlFor:"password_confirmation",children:"Re-type New Password"}),(0,t.jsx)("input",{id:"password_confirmation",type:"password",placeholder:"Re-type New Password",value:e.password_confirmation,onChange:s,required:!0})]}),(0,t.jsx)("button",{type:"submit",className:"rts-btn btn-primary",children:"Reset Password"})]})})},p=()=>{let[e,a]=(0,i.useState)("profile");return(0,t.jsx)("div",{className:"col-lg-9",children:(0,t.jsxs)("div",{className:"settings-wrapper-dashed",children:[(0,t.jsx)("h5",{className:"title",children:"Settings"}),(0,t.jsxs)("ul",{className:"nav nav-pills mb-3 tab-buttons",id:"pills-tab",role:"tablist",children:[(0,t.jsx)("li",{className:"nav-item",role:"presentation",children:(0,t.jsx)("button",{className:`nav-link ${"profile"===e?"active":""}`,id:"pills-home-tab","data-bs-toggle":"pill","data-bs-target":"#pills-home",type:"button",role:"tab","aria-controls":"pills-home","aria-selected":"profile"===e,onClick:()=>a("profile"),children:"Profile"})}),(0,t.jsx)("li",{className:"nav-item",role:"presentation",children:(0,t.jsx)("button",{className:`nav-link ${"password"===e?"active":""}`,id:"pills-profile-tab","data-bs-toggle":"pill","data-bs-target":"#pills-profile",type:"button",role:"tab","aria-controls":"pills-profile","aria-selected":"password"===e,onClick:()=>a("password"),children:"Password"})}),(0,t.jsx)("li",{className:"nav-item",role:"presentation",children:(0,t.jsx)("button",{className:`nav-link ${"social"===e?"active":""}`,id:"pills-profile-tab","data-bs-toggle":"pill","data-bs-target":"#pills-profile",type:"button",role:"tab","aria-controls":"pills-profile","aria-selected":"social"===e,onClick:()=>a("social"),children:"Social"})})]}),(0,t.jsx)("div",{className:"tab-content",id:"pills-tabContent",children:(()=>{switch(e){case"profile":default:return(0,t.jsx)(o,{});case"password":return(0,t.jsx)(c,{});case"social":return(0,t.jsx)(d,{})}})()})]})})}},70733:(e,a,s)=>{s.d(a,{E:()=>i,T:()=>t});let t=async e=>{let a=JSON.parse(localStorage.getItem("data"));if(!a||!a.id)throw Error("No valid data found in local storage");let s=Object.values(e.url).join(""),t={id_nguoidung:a.id,nentang:e.nentang,url:s};try{let e=await fetch("http://huuphuoc.id.vn/api/mangxahoi",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){let a=await e.json();throw console.error("Error Response:",a),Error("Failed to update user data")}return await e.json()}catch(e){throw console.error("Fetch error:",e),Error("Network error or server is down")}},i=async()=>{let e=JSON.parse(localStorage.getItem("data"));if(!e||!e.id)throw Error("No valid data found in local storage");let a={id_nguoidung:e.id};try{let e=await fetch("http://huuphuoc.id.vn/api/showmangxahoi",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok){let a=await e.json();throw console.error("Error Response:",a),Error("Failed to update user data")}return await e.json()}catch(e){throw console.error("Fetch error:",e),Error("Network error or server is down")}}}};