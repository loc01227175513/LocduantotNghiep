"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{90676:(e,a,s)=>{s.r(a),s.d(a,{default:()=>h});var i=s(57437),l=s(2265),c=s(87138),r=s(66648);let t=e=>{let{courses:a}=e,s=e=>{let a=0;for(let s=0;s<e.length;s++)a+=parseFloat(e[s].danhgia);return a/e.length};return(0,i.jsx)("div",{className:"row",children:a.map(e=>(0,i.jsx)("div",{className:"col-lg-4 col-md-6 col-sm-12 col-12",children:(0,i.jsx)(c.default,{href:"/page/course-detail?id=".concat(e.id),children:(0,i.jsxs)("div",{className:"rts-single-course",children:[(0,i.jsx)("a",{href:"single-course.html",className:"thumbnail",children:(0,i.jsx)(r.default,{width:500,height:300,src:e.hinh,alt:"course"})}),(0,i.jsx)("div",{className:"save-icon","data-bs-toggle":"modal","data-bs-target":"#exampleModal-login",children:(0,i.jsx)("i",{className:"fa-sharp fa-light fa-bookmark"})}),(0,i.jsx)("div",{className:"tags-area-wrapper",children:(0,i.jsx)("div",{className:"single-tag",children:(0,i.jsx)("span",{children:e.chude})})}),(0,i.jsxs)("div",{className:"lesson-studente",children:[(0,i.jsxs)("div",{className:"lesson",children:[(0,i.jsx)("i",{className:"fa-light fa-calendar-lines-pen"}),(0,i.jsxs)("span",{children:[e.baihocs," Lessons"]})]}),(0,i.jsxs)("div",{className:"lesson",children:[(0,i.jsx)("i",{className:"fa-light fa-user-group"}),(0,i.jsxs)("span",{children:[e.dangky," Students"]})]})]}),(0,i.jsx)("a",{href:"single-course.html",children:(0,i.jsx)("h5",{className:"title",children:e.ten})}),(0,i.jsx)("p",{className:"teacher",children:e.giangvien}),(0,i.jsxs)("div",{className:"rating-and-price",children:[(0,i.jsxs)("div",{className:"rating-area",children:[(0,i.jsx)("span",{children:s(e.danhgia).toFixed(1)}),(0,i.jsx)("div",{className:"stars",children:(0,i.jsx)("ul",{children:[void 0,void 0,void 0,void 0,void 0].map((a,l)=>(0,i.jsx)("li",{children:(0,i.jsx)("i",{className:"fa-sharp fa-solid fa-star".concat(l<s(e.danhgia)?" text-warning":"-o")})},l))})})]}),(0,i.jsx)("div",{className:"price-area",children:0===e.gia&&0===e.giamgia?(0,i.jsx)("div",{className:"price",children:"Miễn ph\xed"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"not price",children:["$",e.gia]}),(0,i.jsxs)("div",{className:"price",children:["$",e.giamgia]})]})})]})]})},e.id)},e.id))})},n=e=>{let{courses:a}=e,s=e=>{let a=0;for(let s=0;s<e.length;s++)a+=parseFloat(e[s].danhgia);return a/e.length};return(0,i.jsx)("div",{className:"row",children:a.map(e=>(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)(c.default,{href:"/page/course-detail?id=".concat(e.id),children:(0,i.jsxs)("div",{className:"rts-single-course",children:[(0,i.jsx)("a",{href:"single-course.html",children:(0,i.jsx)(r.default,{width:500,height:300,src:e.hinh,className:"w-80",alt:"course"})}),(0,i.jsx)("div",{className:"save-icon","data-bs-toggle":"modal","data-bs-target":"#exampleModal-login",children:(0,i.jsx)("i",{className:"fa-sharp fa-light fa-bookmark"})}),(0,i.jsx)("div",{className:"tags-area-wrapper",children:(0,i.jsx)("div",{className:"single-tag",children:(0,i.jsx)("span",{children:e.chude})})}),(0,i.jsxs)("div",{className:"lesson-studente",children:[(0,i.jsxs)("div",{className:"lesson",children:[(0,i.jsx)("i",{className:"fa-light fa-calendar-lines-pen"}),(0,i.jsxs)("span",{children:[e.baihocs," Lessons"]})]}),(0,i.jsxs)("div",{className:"lesson",children:[(0,i.jsx)("i",{className:"fa-light fa-user-group"}),(0,i.jsxs)("span",{children:[e.dangky," Students"]})]})]}),(0,i.jsx)("a",{href:"single-course.html",children:(0,i.jsx)("h5",{className:"title",children:e.ten})}),(0,i.jsx)("p",{className:"teacher",children:e.giangvien}),(0,i.jsxs)("div",{className:"rating-and-price",children:[(0,i.jsxs)("div",{className:"rating-area",children:[(0,i.jsx)("span",{children:s(e.danhgia).toFixed(1)}),(0,i.jsx)("div",{className:"stars",children:(0,i.jsx)("ul",{children:[void 0,void 0,void 0,void 0,void 0].map((a,l)=>(0,i.jsx)("li",{children:(0,i.jsx)("i",{className:"fa-sharp fa-solid fa-star".concat(l<s(e.danhgia)?" text-warning":"-o")})},l))})})]}),(0,i.jsx)("div",{className:"price-area",children:0===e.gia&&0===e.giamgia?(0,i.jsx)("div",{className:"price",children:"Miễn ph\xed"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"not price",children:["$",e.gia]}),(0,i.jsxs)("div",{className:"price",children:["$",e.giamgia]})]})})]})]})},e.id)},e.id))})};var d=s(92293);function h(){let e=new URLSearchParams(window.location.search).get("search"),[a,s]=(0,l.useState)("grid"),[c,r]=(0,l.useState)([]),[h,o]=(0,l.useState)([]),[x,g]=(0,l.useState)(e||""),[m,j]=(0,l.useState)([]),[u,p]=(0,l.useState)([]),[f,v]=(0,l.useState)([]),N=new URLSearchParams(window.location.search).get("id"),[w,b]=(0,l.useState)("");(0,l.useEffect)(()=>{(0,d.Fh)().then(e=>{r(e.data),o(e.data)}).catch(e=>{console.error("Error fetching data:",e)})},[]),(0,l.useEffect)(()=>{let e=c;if(N){let a=parseInt(N,10);isNaN(a)||(e=e.filter(e=>e.id_theloai===a))}x&&(e=e.filter(e=>e.ten.toLowerCase().includes(x.toLowerCase()))),m.length>0&&(e=e.filter(e=>m.includes(e.chude))),u.length>0&&(e=e.filter(e=>u.includes(e.giangvien))),f.length>0&&(e=e.filter(e=>!!(f.includes("Miễn ph\xed")&&0===e.gia||f.includes("Trả")&&e.gia>0))),w&&(e=[...e].sort((e,a)=>{switch(w){case"Popularity":return a.dangky-e.dangky;case"Price":return e.gia-a.gia;case"Stars":let s=k(e.danhgia);return k(a.danhgia)-s;case"Newest":return new Date(a.created_at)-new Date(e.created_at);case"Oldest":return new Date(e.created_at)-new Date(a.created_at);default:return 0}})),o(e)},[c,x,m,u,f,w,N]);let k=e=>e&&0!==e.length?e.reduce((e,a)=>e+parseFloat(a.danhgia),0)/e.length:0,y=e=>a=>{let{value:s,checked:i}=a.target;e(e=>i?[...e,s]:e.filter(e=>e!==s))};return(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"rts-course-default-area rts-section-gap",children:(0,i.jsx)("div",{className:"container",children:(0,i.jsxs)("div",{className:"row g-5",children:[(0,i.jsx)("div",{className:"col-lg-3",children:(0,i.jsxs)("div",{className:"rts-course-filter-area",children:[(0,i.jsxs)("div",{className:"single-filter-left-wrapper",children:[(0,i.jsx)("h6",{className:"title",children:"T\xecm kiếm"}),(0,i.jsx)("div",{className:"search-filter filter-body",children:(0,i.jsxs)("div",{className:"input-wrapper",children:[(0,i.jsx)("input",{type:"text",placeholder:"Search Course...",value:x,onChange:e=>{g(e.target.value)}}),(0,i.jsx)("i",{className:"fa-light fa-magnifying-glass"})]})})]}),(0,i.jsxs)("div",{className:"single-filter-left-wrapper",children:[(0,i.jsx)("h6",{className:"title",children:"Loại"}),(0,i.jsx)("div",{className:"checkbox-filter filter-body",children:(0,i.jsx)("div",{className:"checkbox-wrapper",children:Array.from(new Set(c.map(e=>e.chude))).map((e,a)=>(0,i.jsx)("div",{className:"single-checkbox-filter",children:(0,i.jsxs)("div",{className:"check-box",children:[(0,i.jsx)("input",{type:"checkbox",id:"category-".concat(a),value:e,checked:m.includes(e),onChange:y(j)}),(0,i.jsx)("label",{htmlFor:"category-".concat(a),children:e}),(0,i.jsx)("br",{})]})},a))})})]}),(0,i.jsxs)("div",{className:"single-filter-left-wrapper",children:[(0,i.jsx)("h6",{className:"title",children:"T\xe1c giả"}),(0,i.jsx)("div",{className:"checkbox-filter filter-body",children:(0,i.jsx)("div",{className:"checkbox-wrapper",children:Array.from(new Set(c.map(e=>e.giangvien))).map((e,a)=>(0,i.jsx)("div",{className:"single-checkbox-filter",children:(0,i.jsxs)("div",{className:"check-box",children:[(0,i.jsx)("input",{type:"checkbox",id:"author-".concat(a),value:e,checked:u.includes(e),onChange:y(p)}),(0,i.jsx)("label",{htmlFor:"author-".concat(a),children:e}),(0,i.jsx)("br",{})]})},a))})})]}),(0,i.jsxs)("div",{className:"single-filter-left-wrapper",children:[(0,i.jsx)("h6",{className:"title",children:"Gi\xe1"}),(0,i.jsx)("div",{className:"checkbox-filter filter-body last",children:(0,i.jsx)("div",{className:"checkbox-wrapper",children:["Miễn ph\xed","Trả"].map((e,a)=>(0,i.jsx)("div",{className:"single-checkbox-filter",children:(0,i.jsxs)("div",{className:"check-box",children:[(0,i.jsx)("input",{type:"checkbox",id:"price-".concat(a),value:e,checked:f.includes(e),onChange:y(v)}),(0,i.jsx)("label",{htmlFor:"price-".concat(a),children:e}),(0,i.jsx)("br",{})]})},a))})})]}),(0,i.jsxs)("button",{className:"rts-btn btn-border",onClick:()=>{g(""),j([]),p([]),v([]),b("")},children:[(0,i.jsx)("i",{className:"fa-regular fa-x"})," X\xf3a tất cả c\xe1c bộ lọc"]})]})}),(0,i.jsxs)("div",{className:"col-lg-9",children:[(0,i.jsxs)("div",{className:"filter-small-top-full",children:[(0,i.jsxs)("div",{className:"left-filter",children:[(0,i.jsx)("span",{children:"Sắp xếp theo"}),(0,i.jsxs)("select",{className:"nice-select",name:"sort",value:w,onChange:e=>{b(e.target.value)},children:[(0,i.jsx)("option",{value:"",children:"Mặc định"}),(0,i.jsx)("option",{value:"Popularity",children:"Sự phổ biến"}),(0,i.jsx)("option",{value:"Price",children:"Gi\xe1"}),(0,i.jsx)("option",{value:"Stars",children:"Sao"}),(0,i.jsx)("option",{value:"Newest",children:"Mới nhất"}),(0,i.jsx)("option",{value:"Oldest",children:"L\xe2u đời nhất"})]})]}),(0,i.jsxs)("div",{className:"right-filter",children:[(0,i.jsxs)("span",{children:["Hiển thị ",h.length," của ",c.length," kết quả"]}),(0,i.jsxs)("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:[(0,i.jsx)("li",{className:"nav-item",role:"presentation",children:(0,i.jsxs)("button",{onClick:()=>s("grid"),className:"nav-link ".concat("grid"===a?"active":""),id:"home-tab",type:"button",role:"tab",children:[(0,i.jsx)("i",{className:"fa-light fa-grid-2"}),(0,i.jsx)("span",{children:"Grid"})]})}),(0,i.jsx)("li",{className:"nav-item",role:"presentation",children:(0,i.jsxs)("button",{onClick:()=>s("list"),className:"nav-link ".concat("list"===a?"active":""),id:"profile-tab",type:"button",role:"tab",children:[(0,i.jsx)("i",{className:"fa-light fa-list"}),(0,i.jsx)("span",{children:"Danh s\xe1ch"})]})})]})]})]}),(()=>{switch(a){case"grid":default:return(0,i.jsx)(t,{courses:h});case"list":return(0,i.jsx)(n,{courses:h})}})()]})]})})})})}},92293:(e,a,s)=>{s.d(a,{Fh:()=>i,T_:()=>l,UF:()=>c,lg:()=>r});let i=async()=>{try{let e=await fetch("http://huuphuoc.id.vn/api/allkhoahoc");if(!e.ok)throw Error("Failed to fetch courses");return await e.json()}catch(e){throw console.error("Error fetching courses:",e),e}},l=async e=>{let a=await fetch("".concat("http://huuphuoc.id.vn/api/Khoahocchitiet/".concat(e)));if(!a.ok)throw Error("Failed to fetch courses");return a.json()},c=async()=>{let e=new URLSearchParams(window.location.search).get("id");console.log("id_khoahoc",e);let a=JSON.parse(localStorage.getItem("data"));if(!e)throw Error("Course ID not found in URL");try{let s=await fetch("".concat("http://huuphuoc.id.vn/api/ThemKhoaHocDaHoc"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_khoahoc:e,id_nguoidung:a.id})});if(!s.ok){let e=await s.text();throw Error("Failed to fetch certificate: ".concat(s.status," ").concat(s.statusText," - ").concat(e))}return s.json()}catch(e){throw console.error("Error:",e),e}},r=async()=>{let e=new URLSearchParams(window.location.search).get("id"),a=await fetch("".concat("http://huuphuoc.id.vn/api/GiangVienKhoaHocHienThi/".concat(e)));if(!a.ok)throw Error("Failed to fetch courses");return a.json()}}}]);