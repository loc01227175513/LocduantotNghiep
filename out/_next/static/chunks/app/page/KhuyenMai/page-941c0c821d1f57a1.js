(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3757],{41532:(e,r,a)=>{Promise.resolve().then(a.bind(a,43699))},43699:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>S});var t=a(57437),i=a(2265),o=a(26566),n=a(65387),s=a(68040),l=a(37791),c=a(27529),d=a(99915),m=a(14644),h=a(97010),u=a(60185);let g=(0,m.G)(function(e,r){let a=(0,h.m)("Badge",e),{className:i,...o}=(0,c.L)(e);return(0,t.jsx)(u.m.span,{ref:r,className:(0,d.cx)("chakra-badge",e.className),...o,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...a}})});g.displayName="Badge";var p=a(99957),x=a(35903),f=a(42988),y=a(83798),v=a(95956);let b=(0,f.E)(o.x);function j(e){let{maso:r,giamgia:a,gia:i,trangthai:c,hinh:d,onSave:m,isSaved:h}=e,u=(0,n.ff)("white","gray.800"),f=(0,n.ff)("#fff7e6","gray.700");return(0,t.jsx)(b,{maxW:"300px",w:"100%",borderRadius:"md",overflow:"hidden",whileHover:{scale:1.05},transition:"0.2s",boxShadow:"md",children:(0,t.jsxs)(s.U,{bg:u,spacing:0,align:"stretch",children:[(0,t.jsx)(o.x,{p:3,bg:f,w:{base:"100%",sm:"40%"},minH:{base:"80px",sm:"auto"},borderRightWidth:{base:0,sm:"1px"},display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsx)(l.E,{src:d,alt:d,maxH:"70px",objectFit:"contain"})}),(0,t.jsxs)(o.x,{p:3,w:{base:"100%",sm:"60%"},children:["Đ\xe3 Duyệt"===c&&(0,t.jsx)(g,{colorScheme:"red",mb:1,fontSize:"xs",children:r}),(0,t.jsxs)(p.x,{color:"red.500",fontSize:{base:"16px",md:"18px"},fontWeight:"bold",mb:1,children:["Giảm ",a,"%"]}),(0,t.jsxs)(p.x,{color:"gray.500",fontSize:"xs",mb:1,children:["Đơn Tối Thiểu ₫",i]}),(0,t.jsxs)(s.U,{justify:"space-between",children:[(0,t.jsx)(p.x,{color:"blue.500",fontSize:"xs",children:"Điều Kiện"}),(0,t.jsxs)(x.z,{size:"xs",colorScheme:h?"gray":"red",onClick:()=>m(r),className:"bg-red-300 text-white",isDisabled:h,_hover:{transform:"translateY(-2px)",shadow:"md"},children:[(0,t.jsx)("i",{className:"bi ".concat(h?"bi-check-circle":"bi-save"),style:{marginRight:"4px"}}),h?"Đ\xe3 Lưu":"Lưu"]})]})]})]})})}function w(){let[e,r]=(0,i.useState)([]);(0,n.ff)("gray.50","gray.900");let[a,o]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{try{let e=await (0,y.ro)();o(e)}catch(e){console.error("Fetch error:",e),v.Am.error("Failed to fetch vouchers.")}})()},[]);let s=async e=>{try{let t=a.find(r=>r.magiamgia.maso===e);t&&(await (0,y.vg)({id_magiamgia:t.magiamgia.id}),r(r=>[...r,e]),v.Am.success("Voucher saved successfully!"))}catch(e){console.error("Save error:",e),v.Am.error("Failed to save voucher.")}};return(0,t.jsxs)("div",{className:"container-fluid bg-light py-4",children:[(0,t.jsx)(v.Ix,{}),(0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("div",{className:"text-center mb-4",children:[(0,t.jsx)(f.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,t.jsx)("h2",{className:"text-danger",children:"Ưu đ\xe3i hấp dẫn"})}),(0,t.jsx)("p",{className:"text-muted mt-2",children:"Số lượng c\xf3 hạn, d\xe0nh cho những bạn nhanh nhất"})]}),(0,t.jsx)("div",{className:"row",children:a.map(r=>(0,t.jsx)(f.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*r.id},className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-4",children:(0,t.jsx)(j,{maso:r.magiamgia.maso,giamgia:r.khoahoc.giamgia,gia:r.khoahoc.gia,hinh:r.khoahoc.hinh,trangthai:r.magiamgia.trangthai,onSave:s,isSaved:e.includes(r.magiamgia.maso),disabled:"Đ\xe3 sử dụng"===r.magiamgia.trangthai})},r.id))})]})]})}var N=a(45497),k=a(49078);function S(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.default,{}),(0,t.jsx)("div",{className:"flex h-screen mt-60 mb-60",children:(0,t.jsx)(w,{})}),(0,t.jsx)(k.Z,{})]})}},83798:(e,r,a)=>{"use strict";a.d(r,{bx:()=>s,lk:()=>t,on:()=>o,ro:()=>i,vH:()=>l,vg:()=>n});let t=async e=>{let r=new URLSearchParams(window.location.search).get("id");try{let a=await fetch("http://huuphuoc.id.vn/api/addMaGiamGiaKhoaHoc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_khoahoc:r,id_magiamgia:e})});if(!a.ok)throw Error("Failed to add MaGiamGia");return a.json()}catch(e){throw console.error("Fetch error:",e),Error("Network error or server is down")}},i=async()=>{try{let e=await fetch("http://huuphuoc.id.vn/api/showAllMaGiamGiaKhoaHoc");if(!e.ok)throw Error("Failed to fetch MaGiamGia data");return e.json()}catch(e){throw console.error("Fetch error:",e),Error("Network error or server is down")}},o=async()=>{try{let e=await fetch("http://huuphuoc.id.vn/api/showAllMaGiamGia");if(!e.ok)throw Error("Failed to fetch MaGiamGia data");return e.json()}catch(e){throw console.error("Fetch error:",e),Error("Network error or server is down")}},n=async e=>{let r=localStorage.getItem("data");if(!r)throw Error("User not authenticated");let a=JSON.parse(r);try{let r=await fetch("http://huuphuoc.id.vn/api/addNguoiDungMaGiamGia",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({trangthai:"Chưa sử dụng",dasudunghientai:"0",id_nguoidung:a.id,id_magiamgia:e.id_magiamgia})});if(!r.ok){let e=await r.json();throw Error(e.message||"Failed to add MaGiamGia")}return r.json()}catch(e){throw console.error("Fetch error:",e),Error(e.message||"Network error or server is down")}},s=async()=>{let e=JSON.parse(localStorage.getItem("data"));if(!e||!e.id)throw Error("User data is missing or invalid");try{let r=await fetch("http://huuphuoc.id.vn/api/showAllNguoiDungMaGiamGia",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_nguoidung:e.id})});if(!r.ok)throw Error("Server error: ".concat(r.statusText));return r.json()}catch(e){throw console.error("Fetch error:",e),Error("Network error or server is down")}},l=async()=>{let e=localStorage.getItem("data"),r=localStorage.getItem("appliedCoupons");if(!e)throw Error("User not authenticated");if(!r)throw Error("No applied coupons found");try{var a;let t=JSON.parse(e),i=r?JSON.parse(r):[];if(!t.id||!(null===(a=i[0])||void 0===a?void 0:a.id_magiamgia))throw Error("Invalid user or coupon data");let o=await fetch("http://huuphuoc.id.vn/api/TinhMaGiamGia",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_nguoidung:t.id,id_magiamgia:i[0].id_magiamgia})});if(!o.ok){let e=await o.json();throw Error(e.message||"Failed to add MaGiamGia")}return o.json()}catch(e){throw console.error("Fetch error:",e),Error(e.message||"Network error or server is down")}}},42114:(e,r,a)=>{"use strict";a.d(r,{G:()=>o});var t,i=a(2265);let o=(null===(t=globalThis)||void 0===t?void 0:t.document)?i.useLayoutEffect:i.useEffect},20673:(e,r,a)=>{"use strict";a.d(r,{D:()=>t,i:()=>i});let[t,i]=(0,a(97872).k)({strict:!1,name:"ButtonGroupContext"})},35903:(e,r,a)=>{"use strict";a.d(r,{z:()=>f});var t=a(57437),i=a(13790),o=a(27529),n=a(8213),s=a(99915),l=a(2265),c=a(20673),d=a(60185);function m(e){let{children:r,className:a,...i}=e,o=(0,l.isValidElement)(r)?(0,l.cloneElement)(r,{"aria-hidden":!0,focusable:!1}):r,n=(0,s.cx)("chakra-button__icon",a);return(0,t.jsx)(d.m.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...i,className:n,children:o})}m.displayName="ButtonIcon";var h=a(16901),u=a(66925);function g(e){let{label:r,placement:a,spacing:i="0.5rem",children:o=(0,t.jsx)(u.$,{color:"currentColor",width:"1em",height:"1em"}),className:n,__css:c,...m}=e,g=(0,s.cx)("chakra-button__spinner",n),p="start"===a?"marginEnd":"marginStart",x=(0,l.useMemo)(()=>(0,h.k0)({display:"flex",alignItems:"center",position:r?"relative":"absolute",[p]:r?i:0,fontSize:"1em",lineHeight:"normal",...c}),[c,r,p,i]);return(0,t.jsx)(d.m.div,{className:g,...m,__css:x,children:o})}g.displayName="ButtonSpinner";var p=a(14644),x=a(97010);let f=(0,p.G)((e,r)=>{let a=(0,c.i)(),m=(0,x.m)("Button",{...a,...e}),{isDisabled:h=null==a?void 0:a.isDisabled,isLoading:u,isActive:p,children:f,leftIcon:v,rightIcon:b,loadingText:j,iconSpacing:w="0.5rem",type:N,spinner:k,spinnerPlacement:S="start",className:_,as:E,shouldWrapChildren:G,...C}=(0,o.L)(e),F=(0,l.useMemo)(()=>{let e={...null==m?void 0:m._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...m,...!!a&&{_focus:e}}},[m,a]),{ref:O,type:I}=function(e){let[r,a]=(0,l.useState)(!e);return{ref:(0,l.useCallback)(e=>{e&&a("BUTTON"===e.tagName)},[]),type:r?"button":void 0}}(E),L={rightIcon:b,leftIcon:v,iconSpacing:w,children:f,shouldWrapChildren:G};return(0,t.jsxs)(d.m.button,{disabled:h||u,ref:(0,i.qq)(r,O),as:E,type:null!=N?N:I,"data-active":(0,n.P)(p),"data-loading":(0,n.P)(u),__css:F,className:(0,s.cx)("chakra-button",_),...C,children:[u&&"start"===S&&(0,t.jsx)(g,{className:"chakra-button__spinner--start",label:j,placement:"start",spacing:w,children:k}),u?j||(0,t.jsx)(d.m.span,{opacity:0,children:(0,t.jsx)(y,{...L})}):(0,t.jsx)(y,{...L}),u&&"end"===S&&(0,t.jsx)(g,{className:"chakra-button__spinner--end",label:j,placement:"end",spacing:w,children:k})]})});function y(e){let{leftIcon:r,rightIcon:a,children:i,iconSpacing:o,shouldWrapChildren:n}=e;return n?(0,t.jsxs)("span",{style:{display:"contents"},children:[r&&(0,t.jsx)(m,{marginEnd:o,children:r}),i,a&&(0,t.jsx)(m,{marginStart:o,children:a})]}):(0,t.jsxs)(t.Fragment,{children:[r&&(0,t.jsx)(m,{marginEnd:o,children:r}),i,a&&(0,t.jsx)(m,{marginStart:o,children:a})]})}f.displayName="Button"},37791:(e,r,a)=>{"use strict";a.d(r,{E:()=>m});var t=a(57437),i=a(30422),o=a(14644);let n=(0,o.G)(function(e,r){let{htmlWidth:a,htmlHeight:i,alt:o,...n}=e;return(0,t.jsx)("img",{width:a,height:i,ref:r,alt:o,...n})});n.displayName="NativeImage";var s=a(42114),l=a(2265);let c=(e,r)=>"loaded"!==e&&"beforeLoadOrError"===r||"failed"===e&&"onError"===r;var d=a(60185);let m=(0,o.G)(function(e,r){let{fallbackSrc:a,fallback:o,src:m,srcSet:h,align:u,fit:g,loading:p,ignoreFallback:x,crossOrigin:f,fallbackStrategy:y="beforeLoadOrError",referrerPolicy:v,...b}=e,j=void 0!==a||void 0!==o,w=null!=p||x||!j,N=c(function(e){let{loading:r,src:a,srcSet:t,onLoad:i,onError:o,crossOrigin:n,sizes:c,ignoreFallback:d}=e,[m,h]=(0,l.useState)("pending");(0,l.useEffect)(()=>{h(a?"loading":"pending")},[a]);let u=(0,l.useRef)(),g=(0,l.useCallback)(()=>{if(!a)return;p();let e=new Image;e.src=a,n&&(e.crossOrigin=n),t&&(e.srcset=t),c&&(e.sizes=c),r&&(e.loading=r),e.onload=e=>{p(),h("loaded"),null==i||i(e)},e.onerror=e=>{p(),h("failed"),null==o||o(e)},u.current=e},[a,n,t,c,i,o,r]),p=()=>{u.current&&(u.current.onload=null,u.current.onerror=null,u.current=null)};return(0,s.G)(()=>{if(!d)return"loading"===m&&g(),()=>{p()}},[m,g,d]),d?"loaded":m}({...e,crossOrigin:f,ignoreFallback:w}),y),k={ref:r,objectFit:g,objectPosition:u,...w?b:(0,i.C)(b,["onError","onLoad"])};return N?o||(0,t.jsx)(d.m.img,{as:n,className:"chakra-image__placeholder",src:a,...k}):(0,t.jsx)(d.m.img,{as:n,src:m,srcSet:h,crossOrigin:f,loading:p,referrerPolicy:v,className:"chakra-image",...k})});m.displayName="Image"},66925:(e,r,a)=>{"use strict";a.d(r,{$:()=>m});var t=a(57437),i=a(27529),o=a(99915),n=a(63098),s=a(14644),l=a(97010),c=a(60185);let d=(0,n.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),m=(0,s.G)((e,r)=>{let a=(0,l.m)("Spinner",e),{label:n="Loading...",thickness:s="2px",speed:m="0.45s",emptyColor:h="transparent",className:u,...g}=(0,i.L)(e),p=(0,o.cx)("chakra-spinner",u),x={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:s,borderBottomColor:h,borderLeftColor:h,animation:"".concat(d," ").concat(m," linear infinite"),...a};return(0,t.jsx)(c.m.div,{ref:r,__css:x,className:p,...g,children:n&&(0,t.jsx)(c.m.span,{srOnly:!0,children:n})})});m.displayName="Spinner"},68040:(e,r,a)=>{"use strict";a.d(r,{U:()=>o});var t=a(57437),i=a(37821);let o=(0,a(14644).G)((e,r)=>(0,t.jsx)(i.K,{align:"center",...e,direction:"row",ref:r}));o.displayName="HStack"},37821:(e,r,a)=>{"use strict";a.d(r,{K:()=>d});var t=a(57437),i=a(30339),o=a(99915),n=a(2265),s=a(60185);let l=e=>(0,t.jsx)(s.m.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});l.displayName="StackItem";var c=a(34160);let d=(0,a(14644).G)((e,r)=>{let{isInline:a,direction:d,align:m,justify:h,spacing:u="0.5rem",wrap:g,children:p,divider:x,className:f,shouldWrapChildren:y,...v}=e,b=a?"row":null!=d?d:"column",j=(0,n.useMemo)(()=>(function(e){let{spacing:r,direction:a}=e,t={column:{my:r,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:r,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:r,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:r,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":(0,c.XQ)(a,e=>t[e])}})({spacing:u,direction:b}),[u,b]),w=!!x,N=!y&&!w,k=(0,n.useMemo)(()=>{let e=(0,i.W)(p);return N?e:e.map((r,a)=>{let i=void 0!==r.key?r.key:a,o=a+1===e.length,s=(0,t.jsx)(l,{children:r},i),c=y?s:r;if(!w)return c;let d=(0,n.cloneElement)(x,{__css:j});return(0,t.jsxs)(n.Fragment,{children:[c,o?null:d]},i)})},[x,j,w,N,y,p]),S=(0,o.cx)("chakra-stack",f);return(0,t.jsx)(s.m.div,{ref:r,display:"flex",alignItems:m,justifyContent:h,flexDirection:b,flexWrap:g,gap:w?void 0:u,className:S,...v,children:k})});d.displayName="Stack"},8213:(e,r,a)=>{"use strict";a.d(r,{P:()=>t,Q:()=>i});let t=e=>e?"":void 0,i=e=>!!e||void 0},30339:(e,r,a)=>{"use strict";a.d(r,{W:()=>i});var t=a(2265);function i(e){return t.Children.toArray(e).filter(e=>(0,t.isValidElement)(e))}}},e=>{var r=r=>e(e.s=r);e.O(0,[5950,8173,4974,5919,5956,2130,8472,624,6944,9605,5497,9078,7130,6215,1744],()=>r(41532)),_N_E=e.O()}]);