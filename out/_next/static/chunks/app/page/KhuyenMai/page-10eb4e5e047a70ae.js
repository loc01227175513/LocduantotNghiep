(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5792],{1103:(e,r,a)=>{Promise.resolve().then(a.bind(a,52083))},52083:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>k});var t=a(95155),i=a(12115),o=a(9949),n=a(86799),s=a(40674),l=a(39051),c=a(70723),d=a(39353),h=a(97459),m=a(70605),u=a(38642);let g=(0,h.R)(function(e,r){let a=(0,m.V)("Badge",e),{className:i,...o}=(0,c.M)(e);return(0,t.jsx)(u.B.span,{ref:r,className:(0,d.cx)("chakra-badge",e.className),...o,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...a}})});g.displayName="Badge";var p=a(43083),f=a(31027),x=a(1797),y=a(47123),v=a(91068);let b=(0,x.P)(o.a);function j(e){let{maso:r,giamgia:a,gia:i,trangthai:c,hinh:d,onSave:h,isSaved:m}=e,u=(0,n.dU)("white","gray.800"),x=(0,n.dU)("#fff7e6","gray.700");return(0,t.jsx)(b,{maxW:"300px",w:"100%",borderRadius:"md",overflow:"hidden",whileHover:{scale:1.05},transition:"0.2s",boxShadow:"md",children:(0,t.jsxs)(s.z,{bg:u,spacing:0,align:"stretch",children:[(0,t.jsx)(o.a,{p:3,bg:x,w:{base:"100%",sm:"40%"},minH:{base:"80px",sm:"auto"},borderRightWidth:{base:0,sm:"1px"},display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsx)(l._,{src:d,alt:d,maxH:"70px",objectFit:"contain"})}),(0,t.jsxs)(o.a,{p:3,w:{base:"100%",sm:"60%"},children:["Đ\xe3 Duyệt"===c&&(0,t.jsx)(g,{colorScheme:"red",mb:1,fontSize:"xs",children:r}),(0,t.jsxs)(p.E,{color:"red.500",fontSize:{base:"16px",md:"18px"},fontWeight:"bold",mb:1,children:["Giảm ",a,"%"]}),(0,t.jsxs)(p.E,{color:"gray.500",fontSize:"xs",mb:1,children:["Đơn Tối Thiểu ₫",i]}),(0,t.jsxs)(s.z,{justify:"space-between",children:[(0,t.jsx)(p.E,{color:"blue.500",fontSize:"xs",children:"Điều Kiện"}),(0,t.jsxs)(f.$,{size:"xs",colorScheme:m?"gray":"red",onClick:()=>h(r),className:"bg-red-300 text-white",isDisabled:m,_hover:{transform:"translateY(-2px)",shadow:"md"},children:[(0,t.jsx)("i",{className:"bi ".concat(m?"bi-check-circle":"bi-save"),style:{marginRight:"4px"}}),m?"Đ\xe3 Lưu":"Lưu"]})]})]})]})})}function w(){let[e,r]=(0,i.useState)([]);(0,n.dU)("gray.50","gray.900");let[a,o]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{try{let e=await (0,y.sL)();o(e)}catch(e){console.error("Fetch error:",e),v.oR.error("Failed to fetch vouchers.")}})()},[]);let s=async e=>{try{let t=a.find(r=>r.magiamgia.maso===e);t&&(await (0,y.qC)({id_magiamgia:t.magiamgia.id}),r(r=>[...r,e]),v.oR.success("Voucher saved successfully!"))}catch(e){console.error("Save error:",e),v.oR.error("Failed to save voucher.")}};return(0,t.jsxs)("div",{className:"container-fluid bg-light py-4",children:[(0,t.jsx)(v.N9,{}),(0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("div",{className:"text-center mb-4",children:[(0,t.jsx)(x.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,t.jsx)("h2",{className:"text-danger",children:"Ưu đ\xe3i hấp dẫn"})}),(0,t.jsx)("p",{className:"text-muted mt-2",children:"Số lượng c\xf3 hạn, d\xe0nh cho những bạn nhanh nhất"})]}),(0,t.jsx)("div",{className:"row",children:a.map(r=>(0,t.jsx)(x.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*r.id},className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-4",children:(0,t.jsx)(j,{maso:r.magiamgia.maso,giamgia:r.khoahoc.giamgia,gia:r.khoahoc.gia,hinh:r.khoahoc.hinh,trangthai:r.magiamgia.trangthai,onSave:s,isSaved:e.includes(r.magiamgia.maso),disabled:"Đ\xe3 sử dụng"===r.magiamgia.trangthai})},r.id))})]})]})}var N=a(44149),S=a(59695);function k(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.default,{}),(0,t.jsx)("div",{className:"flex h-screen mt-60 mb-60",children:(0,t.jsx)(w,{})}),(0,t.jsx)(S.A,{})]})}},47123:(e,r,a)=>{"use strict";a.d(r,{$2:()=>l,NI:()=>o,WJ:()=>s,av:()=>t,qC:()=>n,sL:()=>i});let t=async e=>{let r=new URLSearchParams(window.location.search).get("id");try{let a=await fetch("http://huuphuoc.id.vn/api/addMaGiamGiaKhoaHoc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_khoahoc:r,id_magiamgia:e})});if(!a.ok)throw Error("Failed to add MaGiamGia");return a.json()}catch(e){throw console.error("Fetch error:",e),Error("Network error or server is down")}},i=async()=>{try{let e=await fetch("http://huuphuoc.id.vn/api/showAllMaGiamGiaKhoaHoc");if(!e.ok)throw Error("Failed to fetch MaGiamGia data");return e.json()}catch(e){throw console.error("Fetch error:",e),Error("Network error or server is down")}},o=async()=>{try{let e=await fetch("http://huuphuoc.id.vn/api/showAllMaGiamGia");if(!e.ok)throw Error("Failed to fetch MaGiamGia data");return e.json()}catch(e){throw console.error("Fetch error:",e),Error("Network error or server is down")}},n=async e=>{let r=localStorage.getItem("data");if(!r)throw Error("User not authenticated");let a=JSON.parse(r);try{let r=await fetch("http://huuphuoc.id.vn/api/addNguoiDungMaGiamGia",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({trangthai:"Chưa sử dụng",dasudunghientai:"0",id_nguoidung:a.id,id_magiamgia:e.id_magiamgia})});if(!r.ok){let e=await r.json();throw Error(e.message||"Failed to add MaGiamGia")}return r.json()}catch(e){throw console.error("Fetch error:",e),Error(e.message||"Network error or server is down")}},s=async()=>{let e=JSON.parse(localStorage.getItem("data"));if(!e||!e.id)throw Error("User data is missing or invalid");try{let r=await fetch("http://huuphuoc.id.vn/api/showAllNguoiDungMaGiamGia",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_nguoidung:e.id})});if(!r.ok)throw Error("Server error: ".concat(r.statusText));return r.json()}catch(e){throw console.error("Fetch error:",e),Error("Network error or server is down")}},l=async()=>{let e=localStorage.getItem("data"),r=localStorage.getItem("appliedCoupons");if(!e)throw Error("User not authenticated");if(!r)throw Error("No applied coupons found");try{var a;let t=JSON.parse(e),i=r?JSON.parse(r):[];if(!t.id||!(null===(a=i[0])||void 0===a?void 0:a.id_magiamgia))throw Error("Invalid user or coupon data");let o=await fetch("http://huuphuoc.id.vn/api/TinhMaGiamGia",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_nguoidung:t.id,id_magiamgia:i[0].id_magiamgia})});if(!o.ok){let e=await o.json();throw Error(e.message||"Failed to add MaGiamGia")}return o.json()}catch(e){throw console.error("Fetch error:",e),Error(e.message||"Network error or server is down")}}},3397:(e,r,a)=>{"use strict";a.d(r,{U:()=>o});var t,i=a(12115);let o=(null===(t=globalThis)||void 0===t?void 0:t.document)?i.useLayoutEffect:i.useEffect},41381:(e,r,a)=>{"use strict";a.d(r,{d:()=>i,l:()=>t});let[t,i]=(0,a(44711).q)({strict:!1,name:"ButtonGroupContext"})},31027:(e,r,a)=>{"use strict";a.d(r,{$:()=>x});var t=a(95155),i=a(38954),o=a(70723),n=a(44037),s=a(39353),l=a(12115),c=a(41381),d=a(38642);function h(e){let{children:r,className:a,...i}=e,o=(0,l.isValidElement)(r)?(0,l.cloneElement)(r,{"aria-hidden":!0,focusable:!1}):r,n=(0,s.cx)("chakra-button__icon",a);return(0,t.jsx)(d.B.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...i,className:n,children:o})}h.displayName="ButtonIcon";var m=a(25916),u=a(74893);function g(e){let{label:r,placement:a,spacing:i="0.5rem",children:o=(0,t.jsx)(u.y,{color:"currentColor",width:"1em",height:"1em"}),className:n,__css:c,...h}=e,g=(0,s.cx)("chakra-button__spinner",n),p="start"===a?"marginEnd":"marginStart",f=(0,l.useMemo)(()=>(0,m.H2)({display:"flex",alignItems:"center",position:r?"relative":"absolute",[p]:r?i:0,fontSize:"1em",lineHeight:"normal",...c}),[c,r,p,i]);return(0,t.jsx)(d.B.div,{className:g,...h,__css:f,children:o})}g.displayName="ButtonSpinner";var p=a(97459),f=a(70605);let x=(0,p.R)((e,r)=>{let a=(0,c.d)(),h=(0,f.V)("Button",{...a,...e}),{isDisabled:m=null==a?void 0:a.isDisabled,isLoading:u,isActive:p,children:x,leftIcon:v,rightIcon:b,loadingText:j,iconSpacing:w="0.5rem",type:N,spinner:S,spinnerPlacement:k="start",className:_,as:E,shouldWrapChildren:B,...G}=(0,o.M)(e),C=(0,l.useMemo)(()=>{let e={...null==h?void 0:h._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...h,...!!a&&{_focus:e}}},[h,a]),{ref:F,type:O}=function(e){let[r,a]=(0,l.useState)(!e);return{ref:(0,l.useCallback)(e=>{e&&a("BUTTON"===e.tagName)},[]),type:r?"button":void 0}}(E),M={rightIcon:b,leftIcon:v,iconSpacing:w,children:x,shouldWrapChildren:B};return(0,t.jsxs)(d.B.button,{disabled:m||u,ref:(0,i.SV)(r,F),as:E,type:null!=N?N:O,"data-active":(0,n.s)(p),"data-loading":(0,n.s)(u),__css:C,className:(0,s.cx)("chakra-button",_),...G,children:[u&&"start"===k&&(0,t.jsx)(g,{className:"chakra-button__spinner--start",label:j,placement:"start",spacing:w,children:S}),u?j||(0,t.jsx)(d.B.span,{opacity:0,children:(0,t.jsx)(y,{...M})}):(0,t.jsx)(y,{...M}),u&&"end"===k&&(0,t.jsx)(g,{className:"chakra-button__spinner--end",label:j,placement:"end",spacing:w,children:S})]})});function y(e){let{leftIcon:r,rightIcon:a,children:i,iconSpacing:o,shouldWrapChildren:n}=e;return n?(0,t.jsxs)("span",{style:{display:"contents"},children:[r&&(0,t.jsx)(h,{marginEnd:o,children:r}),i,a&&(0,t.jsx)(h,{marginStart:o,children:a})]}):(0,t.jsxs)(t.Fragment,{children:[r&&(0,t.jsx)(h,{marginEnd:o,children:r}),i,a&&(0,t.jsx)(h,{marginStart:o,children:a})]})}x.displayName="Button"},39051:(e,r,a)=>{"use strict";a.d(r,{_:()=>h});var t=a(95155),i=a(16263),o=a(97459);let n=(0,o.R)(function(e,r){let{htmlWidth:a,htmlHeight:i,alt:o,...n}=e;return(0,t.jsx)("img",{width:a,height:i,ref:r,alt:o,...n})});n.displayName="NativeImage";var s=a(3397),l=a(12115);let c=(e,r)=>"loaded"!==e&&"beforeLoadOrError"===r||"failed"===e&&"onError"===r;var d=a(38642);let h=(0,o.R)(function(e,r){let{fallbackSrc:a,fallback:o,src:h,srcSet:m,align:u,fit:g,loading:p,ignoreFallback:f,crossOrigin:x,fallbackStrategy:y="beforeLoadOrError",referrerPolicy:v,...b}=e,j=void 0!==a||void 0!==o,w=null!=p||f||!j,N=c(function(e){let{loading:r,src:a,srcSet:t,onLoad:i,onError:o,crossOrigin:n,sizes:c,ignoreFallback:d}=e,[h,m]=(0,l.useState)("pending");(0,l.useEffect)(()=>{m(a?"loading":"pending")},[a]);let u=(0,l.useRef)(),g=(0,l.useCallback)(()=>{if(!a)return;p();let e=new Image;e.src=a,n&&(e.crossOrigin=n),t&&(e.srcset=t),c&&(e.sizes=c),r&&(e.loading=r),e.onload=e=>{p(),m("loaded"),null==i||i(e)},e.onerror=e=>{p(),m("failed"),null==o||o(e)},u.current=e},[a,n,t,c,i,o,r]),p=()=>{u.current&&(u.current.onload=null,u.current.onerror=null,u.current=null)};return(0,s.U)(()=>{if(!d)return"loading"===h&&g(),()=>{p()}},[h,g,d]),d?"loaded":h}({...e,crossOrigin:x,ignoreFallback:w}),y),S={ref:r,objectFit:g,objectPosition:u,...w?b:(0,i.c)(b,["onError","onLoad"])};return N?o||(0,t.jsx)(d.B.img,{as:n,className:"chakra-image__placeholder",src:a,...S}):(0,t.jsx)(d.B.img,{as:n,src:h,srcSet:m,crossOrigin:x,loading:p,referrerPolicy:v,className:"chakra-image",...S})});h.displayName="Image"},74893:(e,r,a)=>{"use strict";a.d(r,{y:()=>h});var t=a(95155),i=a(70723),o=a(39353),n=a(71987),s=a(97459),l=a(70605),c=a(38642);let d=(0,n.i7)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),h=(0,s.R)((e,r)=>{let a=(0,l.V)("Spinner",e),{label:n="Loading...",thickness:s="2px",speed:h="0.45s",emptyColor:m="transparent",className:u,...g}=(0,i.M)(e),p=(0,o.cx)("chakra-spinner",u),f={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:s,borderBottomColor:m,borderLeftColor:m,animation:"".concat(d," ").concat(h," linear infinite"),...a};return(0,t.jsx)(c.B.div,{ref:r,__css:f,className:p,...g,children:n&&(0,t.jsx)(c.B.span,{srOnly:!0,children:n})})});h.displayName="Spinner"},40674:(e,r,a)=>{"use strict";a.d(r,{z:()=>o});var t=a(95155),i=a(35786);let o=(0,a(97459).R)((e,r)=>(0,t.jsx)(i.B,{align:"center",...e,direction:"row",ref:r}));o.displayName="HStack"},35786:(e,r,a)=>{"use strict";a.d(r,{B:()=>d});var t=a(95155),i=a(89221),o=a(39353),n=a(12115),s=a(38642);let l=e=>(0,t.jsx)(s.B.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});l.displayName="StackItem";var c=a(86530);let d=(0,a(97459).R)((e,r)=>{let{isInline:a,direction:d,align:h,justify:m,spacing:u="0.5rem",wrap:g,children:p,divider:f,className:x,shouldWrapChildren:y,...v}=e,b=a?"row":null!=d?d:"column",j=(0,n.useMemo)(()=>(function(e){let{spacing:r,direction:a}=e,t={column:{my:r,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:r,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:r,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:r,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":(0,c.bk)(a,e=>t[e])}})({spacing:u,direction:b}),[u,b]),w=!!f,N=!y&&!w,S=(0,n.useMemo)(()=>{let e=(0,i.a)(p);return N?e:e.map((r,a)=>{let i=void 0!==r.key?r.key:a,o=a+1===e.length,s=(0,t.jsx)(l,{children:r},i),c=y?s:r;if(!w)return c;let d=(0,n.cloneElement)(f,{__css:j});return(0,t.jsxs)(n.Fragment,{children:[c,o?null:d]},i)})},[f,j,w,N,y,p]),k=(0,o.cx)("chakra-stack",x);return(0,t.jsx)(s.B.div,{ref:r,display:"flex",alignItems:h,justifyContent:m,flexDirection:b,flexWrap:g,gap:w?void 0:u,className:k,...v,children:S})});d.displayName="Stack"},44037:(e,r,a)=>{"use strict";a.d(r,{r:()=>i,s:()=>t});let t=e=>e?"":void 0,i=e=>!!e||void 0},89221:(e,r,a)=>{"use strict";a.d(r,{a:()=>i});var t=a(12115);function i(e){return t.Children.toArray(e).filter(e=>(0,t.isValidElement)(e))}}},e=>{var r=r=>e(e.s=r);e.O(0,[4297,7970,3264,4592,1068,9228,2651,3726,6225,6742,4149,9695,8441,1517,7358],()=>r(1103)),_N_E=e.O()}]);