(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2869],{4633:(r,a,e)=>{Promise.resolve().then(e.bind(e,10110))},10110:(r,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>s});var o=e(95155),i=e(12115),t=e(47123);function s(){let[r,a]=(0,i.useState)([]);return(0,i.useEffect)(()=>{(async()=>{(0,t.WJ)().then(r=>{a(r)}).catch(r=>{console.error("Fetch error:",r),alert("Failed to fetch vouchers.")})})()},[]),(0,o.jsx)("div",{className:"overflow-y-scroll col-lg-9 h-lvh",style:{backgroundColor:"#f5f5f5"},children:(0,o.jsx)("div",{className:"exrolled-course-wrapper-dashed",children:(0,o.jsxs)("div",{className:"voucher-page container",children:[(0,o.jsx)("h1",{children:"Kho Voucher"}),(0,o.jsx)("div",{className:"voucher-list row justify-content-end",children:r.map(r=>(0,o.jsxs)("div",{className:"voucher-card col-md-4",style:{backgroundColor:"#fff",border:"2px solid #000",padding:"20px",margin:"10px",borderRadius:"10px"},children:[(0,o.jsx)("h2",{children:r.magiamgia.maso}),(0,o.jsxs)("p",{children:["Giảm gi\xe1: ",r.magiamgia.giamgia,"%"]}),(0,o.jsxs)("p",{children:["Giới hạn sử dụng: ",r.dasudunghientai]}),(0,o.jsxs)("p",{children:["C\xe1ch sử dụng hiện tại: ",r.magiamgia.sudunghientai]}),(0,o.jsxs)("p",{children:["Trạng th\xe1i: ",r.magiamgia.trangthai]}),(0,o.jsxs)("p",{children:["Ng\xe0y bắt đầu: ",r.magiamgia.ngaybatdau]}),(0,o.jsxs)("p",{children:["Ng\xe0y hết hạn: ",r.magiamgia.ngayketthuc]})]},r.id))})]})})})}},47123:(r,a,e)=>{"use strict";e.d(a,{$2:()=>d,NI:()=>t,WJ:()=>n,av:()=>o,qC:()=>s,sL:()=>i});let o=async r=>{let a=new URLSearchParams(window.location.search).get("id");try{let e=await fetch("http://huuphuoc.id.vn/api/addMaGiamGiaKhoaHoc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_khoahoc:a,id_magiamgia:r})});if(!e.ok)throw Error("Failed to add MaGiamGia");return e.json()}catch(r){throw console.error("Fetch error:",r),Error("Network error or server is down")}},i=async()=>{try{let r=await fetch("http://huuphuoc.id.vn/api/showAllMaGiamGiaKhoaHoc");if(!r.ok)throw Error("Failed to fetch MaGiamGia data");return r.json()}catch(r){throw console.error("Fetch error:",r),Error("Network error or server is down")}},t=async()=>{try{let r=await fetch("http://huuphuoc.id.vn/api/showAllMaGiamGia");if(!r.ok)throw Error("Failed to fetch MaGiamGia data");return r.json()}catch(r){throw console.error("Fetch error:",r),Error("Network error or server is down")}},s=async r=>{let a=localStorage.getItem("data");if(!a)throw Error("User not authenticated");let e=JSON.parse(a);try{let a=await fetch("http://huuphuoc.id.vn/api/addNguoiDungMaGiamGia",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({trangthai:"Chưa sử dụng",dasudunghientai:"0",id_nguoidung:e.id,id_magiamgia:r.id_magiamgia})});if(!a.ok){let r=await a.json();throw Error(r.message||"Failed to add MaGiamGia")}return a.json()}catch(r){throw console.error("Fetch error:",r),Error(r.message||"Network error or server is down")}},n=async()=>{let r=JSON.parse(localStorage.getItem("data"));if(!r||!r.id)throw Error("User data is missing or invalid");try{let a=await fetch("http://huuphuoc.id.vn/api/showAllNguoiDungMaGiamGia",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_nguoidung:r.id})});if(!a.ok)throw Error("Server error: ".concat(a.statusText));return a.json()}catch(r){throw console.error("Fetch error:",r),Error("Network error or server is down")}},d=async()=>{let r=localStorage.getItem("data"),a=localStorage.getItem("appliedCoupons");if(!r)throw Error("User not authenticated");if(!a)throw Error("No applied coupons found");try{var e;let o=JSON.parse(r),i=a?JSON.parse(a):[];if(!o.id||!(null===(e=i[0])||void 0===e?void 0:e.id_magiamgia))throw Error("Invalid user or coupon data");let t=await fetch("http://huuphuoc.id.vn/api/TinhMaGiamGia",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_nguoidung:o.id,id_magiamgia:i[0].id_magiamgia})});if(!t.ok){let r=await t.json();throw Error(r.message||"Failed to add MaGiamGia")}return t.json()}catch(r){throw console.error("Fetch error:",r),Error(r.message||"Network error or server is down")}}}},r=>{var a=a=>r(r.s=a);r.O(0,[8441,1517,7358],()=>a(4633)),_N_E=r.O()}]);